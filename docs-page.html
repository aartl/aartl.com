<!DOCTYPE html>
<html lang="en">
  <head>
    <title>AARTL Documentation</title>

    <!-- Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta name="description" content="Bootstrap 4 Template For Software Startups" />
    <meta name="author" content="Ivan Kouznetsov" />
    <link rel="shortcut icon" href="favicon.ico" />

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap" rel="stylesheet" />

    <!-- FontAwesome JS-->
    <script defer src="assets/fontawesome/js/all.min.js"></script>

    <!-- Plugins CSS -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.2/styles/atom-one-dark.min.css" />

    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="assets/css/theme.css" />
  </head>

  <body class="docs-page">
    <header class="header fixed-top">
      <div class="branding docs-branding">
        <div class="container-fluid position-relative py-2">
          <div class="docs-logo-wrapper">
            <button
              id="docs-sidebar-toggler"
              class="docs-sidebar-toggler docs-sidebar-visible mr-2 d-xl-none"
              type="button"
            >
              <span></span>
              <span></span>
              <span></span>
            </button>
            <div class="site-logo">
              <a class="navbar-brand" href="index.html"
                ><img class="logo-icon mr-2" src="assets/images/pyramid.png" style="height: 50px;" alt="logo" />
                <span class="text-alt">Agnostic API Reliability Testing Language</span></a
              >
            </div>
          </div>
          <!--//docs-logo-wrapper-->
          <div class="docs-top-utilities d-flex justify-content-end align-items-center">
            <!--
	                <div class="top-search-box d-none d-lg-flex">
		                <form class="search-form">
				            <input type="text" placeholder="Search the docs..." name="search" class="form-control search-input">
				            <button type="submit" class="btn search-btn" value="Search"><i class="fas fa-search"></i></button>
				        </form>
	                </div>
					--->
            <ul class="social-list list-inline mx-md-3 mx-lg-5 mb-0 d-none d-lg-flex">
              <li class="list-inline-item">
                <a href="https://github.com/Ivan-Kouznetsov/aartl"><i class="fab fa-github fa-fw"></i></a>
              </li>
            </ul>
            <!--//social-list-->
            <a href="https://github.com/Ivan-Kouznetsov/aartl/releases" class="btn btn-primary d-none d-lg-flex"
              >Download</a
            >
          </div>
          <!--//docs-top-utilities-->
        </div>
        <!--//container-->
      </div>
      <!--//branding-->
    </header>
    <!--//header-->

    <div class="docs-wrapper">
      <div id="docs-sidebar" class="docs-sidebar">
        <div class="top-search-box d-lg-none p-3">
          <form class="search-form">
            <input type="text" placeholder="Search the docs..." name="search" class="form-control search-input" />
            <button type="submit" class="btn search-btn" value="Search"><i class="fas fa-search"></i></button>
          </form>
        </div>
        <nav id="docs-nav" class="docs-nav navbar">
          <ul class="section-items list-unstyled nav flex-column pb-3">
            <li class="nav-item section-title">
              <a class="nav-link scrollto active" href="#section-1"
                ><span class="theme-icon-holder mr-2"><i class="fas fa-map-signs"></i></span>Introduction</a
              >
            </li>
            <li class="nav-item"><a class="nav-link scrollto" href="#item-1-1">1.1 Example</a></li>
            <li class="nav-item section-title mt-3">
              <a class="nav-link scrollto" href="#section-2"
                ><span class="theme-icon-holder mr-2"><i class="fas fa-arrow-down"></i></span>Installation</a
              >
            </li>
            <li class="nav-item"><a class="nav-link scrollto" href="#item-2-1">2.1 Visual Studio Code extension</a></li>
            <li class="nav-item section-title mt-3">
              <a class="nav-link scrollto" href="#section-3"
                ><span class="theme-icon-holder mr-2"><i class="fas fa-box"></i></span>Getting Started</a
              >
            </li>
            <li class="nav-item"><a class="nav-link scrollto" href="#item-3-1">3.1 Writing your first test</a></li>
            <li class="nav-item"><a class="nav-link scrollto" href="#item-3-2">3.2 Generating test rules</a></li>
            <li class="nav-item section-title mt-3">
              <a class="nav-link scrollto" href="#section-4"
                ><span class="theme-icon-holder mr-2"><i class="fas fa-cogs"></i></span>Rules</a
              >
            </li>
            <li class="nav-item"><a class="nav-link scrollto" href="#item-4-1">4.1 JSON-based rules</a></li>
            <li class="nav-item"><a class="nav-link scrollto" href="#item-4-2">4.2 Header rules</a></li>
            <li class="nav-item"><a class="nav-link scrollto" href="#item-4-3">4.3 Response code rules</a></li>
            <li class="nav-item section-title mt-3">
              <a class="nav-link scrollto" href="#section-5"
                ><span class="theme-icon-holder mr-2"><i class="fas fa-tools"></i></span>CLI Options</a
              >
            </li>
            <li class="nav-item"><a class="nav-link scrollto" href="#item-5-1">5.1 Examples</a></li>
            <li class="nav-item section-title mt-3">
              <a class="nav-link scrollto" href="#section-9"
                ><span class="theme-icon-holder mr-2"><i class="fas fa-lightbulb"></i></span>FAQs</a
              >
            </li>
            <li class="nav-item"><a class="nav-link scrollto" href="#item-6-1">6.1 Prerequisites</a></li>
          </ul>
        </nav>
        <!--//docs-nav-->
      </div>
      <!--//docs-sidebar-->
      <div class="docs-content">
        <div class="container">
          <article class="docs-article" id="section-1">
            <header class="docs-header">
              <h1 class="docs-heading">Introduction <span class="docs-time">Last updated: 2020-08-23</span></h1>
              <section class="docs-intro">
                <p>
                  API tests are an important part of finding and fixing bugs in any server application, but as tests
                  become more complex the tests themselves are likely to become a source of bugs. Since the test code
                  itself is untested, code review is the only line of defense against bugs that cause a test to always
                  pass, this creates a need for tests that are powerful but easy to read. AARTL facilitates writing and
                  running tests that are declarative, easy to read for anyone knowledgeable about HTTP and JSON, and
                  that can do most (possibly all) of the tasks you need for your HTTP API tests. <br /><br />
                  It is different from other test frameworks in that it does not require any procedural code to be
                  written and it can help you auto generate test rules for simple smoke tests.
                </p>
              </section>
              <!--//docs-intro-->
            </header>
            <section class="docs-section" id="item-1-1">
              <h2 class="section-heading">1.1 Example</h2>

              <div class="docs-code-block">
                <!-- ** Embed github code starts ** -->
                <script src="https://gist.github.com/Ivan-Kouznetsov/94e5691d61d75903744c64cc12da54bd.js"></script>
                <!-- ** Embed github code ends ** -->
              </div>
              <!--//docs-code-block-->

              <div class="callout-block callout-block-success">
                <div class="content">
                  <h4 class="callout-title">
                    <span class="callout-icon-holder mr-1"> <i class="fas fa-thumbs-up"></i> </span
                    ><!--//icon-holder-->
                    Tip
                  </h4>
                  <p>
                    This test POSTs the text "Hello world" to localhost:3000/posts and then GETs the same post and checks that it has text that equals to "Hello world"
                  </p>
                </div>
                <!--//content-->
              </div>
              <!--//callout-block-->
            </section>
          </article>

          <article class="docs-article" id="section-2">
            <header class="docs-header">
              <h1 class="docs-heading">Installation</h1>
              <section class="docs-intro">
                <p>
				  The reference implementation of AARTL is implemented using TypeScript and Node.js. <br/><br/>
				  You have two options for running it on your machine:
				  <ul>
					  <li>Run a self-contained release</li>					  
					  <li>Build from source</li>
				  </ul>

				  <h3>Run a self-contained release</h3>
				  <p>
				  	To run one of the self-contained releases: download the right one for your operating system from the Download link above and run it as a command line application.
				  </p>

				  <h3>Build from source</h3>

				  If you are familiar with Node.js and would like the least (possibly unstable) build you can git clone the repository and then do the following steps:
				  <ol>
					  <li>npm ci</li>
					  <li>npm run build</li>
					  <li>node dist/aartl.js -f FILE_YOU_WANT_TO_RUN.aartl</li>
				  </ol>
				  On Linux you may need to use sudo for npm ci 
                </p>
              </section>
              <!--//docs-intro-->
            </header>
            <section class="docs-section" id="item-2-1">
              <h2 class="section-heading">2.1 Visual Studio Code extension</h2>
              <p>
				A Visual Studio Code <a href="https://marketplace.visualstudio.com/items?itemName=IvanKouznetsov.aartl-lang-server">extension</a> is available which 
				provides the following benefits:
				<ul>
					<li>Syntax highlighting</li>
					<li>Code completion</li>
					<li>Automatically generating test rules</li>
					<li>Running tests from within the IDE</li>
				</ul>
              </p>
            </section>
            <!--//section-->

          </article>
          <!--//docs-article-->

          <article class="docs-article" id="section-3">
            <header class="docs-header">
              <h1 class="docs-heading">Getting Started</h1>
              <section class="docs-intro">
				<p>A test consists of a name, optional constant values, optional “After” blocks, and a required "Expect" block. JSON data is referred to within AARTL using JSON paths. For more information about the JSON path standard you may refer to: <a href="https://support.smartbear.com/alertsite/docs/monitors/api/endpoint/jsonpath.html" rel="nofollow">https://support.smartbear.com/alertsite/docs/monitors/api/endpoint/jsonpath.html</a></p>
				<p>An After block consists of:</p>
				<ul>
				<li>The data needed to make a request</li>
				<li>Optional statements about how to handle transitioning to the next request.</li>
				</ul>
				<p>Data needed for an HTTP request is:</p>
				<ul>
				<li>headers <strong><em>Example</em></strong>: 'Accept-Encoding': '*/*'</li>
				<li>method <strong><em>Example</em></strong>: post</li>
				<li>url <strong><em>Example</em></strong>: <a href="http://example.org/things/123" rel="nofollow">http://example.org/things/123</a></li>
				<li>body <strong><em>Example</em></strong>: Hello World</li>
				</ul>
				<p>Optional statements about how to handle transitioning to the next request are:</p>
				<ul>
				<li>Pass on – the Pass on statement can be used to pass on a value from a
				response to the next block. <strong><em>Example</em></strong>: Pass on “$..id” as _id, this
				means that we can refer to the id returned by this request in the
				next request using the _id symbol. The $..id is a JSON path.</li>
				<li>Wait – the Wait statement indicates that there will be a waiting
				period before the next request starts</li>
				</ul>
				<p>An Expect block consists of:</p>
				<ul>
				<li>Data needed to make a request (same as an After block)</li>
				<li>Expectations for what the response should be, there are three types
				of expectations: - JSON data expectations - Header expectations - Status code expectation</li>
				</ul>
				<p>JSON data expectations consist of:</p>
				<ul>
				<li>A JSON path and either a literal value or a rule.</li>
				</ul>

				Consider the following example:
				<pre>
					Test that it should save a post and check id
					Using values
					  @postText: Hello world
					Expect HTTP request
					  method: POST
					  url: http://localhost:3000/posts
					  body: @postText
					To match JSON rules
					  "$..id": >= 0
				</pre>
				In this example "should save a post and check id" is the name of the test.<br/>
				@postText is a constant value equal to "Hello world"<br/>
				POST is the method used for this request<br/>
				http://localhost:3000/posts is the URL being requested<br/>
				"$..id" is  JSON path<br/>
				"$..id": >= 0 is a rule that means that each value that matches the JSON path must be greater than or equal to 0

              </section>
              <!--//docs-intro-->
            </header>
            <section class="docs-section" id="item-3-1">
              <h2 class="section-heading">3.1 Writing your first test</h2>
              <p>
				<p>
					Once the AARTL test runner is setup on your computer you can write your first test and run it.
					<br/>
					You can use the <a href="https://jsonplaceholder.typicode.com/">JSON placeholder website</a> (no affiliation) to write your first AARTL tests.
					
				  </p>
              </p>
            </section>
            <!--//section-->

            <section class="docs-section" id="item-3-2">
              <h2 class="section-heading">3.2 Generating test rules</h2>
              <p>
				The extension can automatically generate JSON-based rules for a test consisting of a GET request by fetching the JSON response and analysing petterns therein. 
				<br/>
				To generate a set of rules for a test using the SON placeholder website, write the follwong:
				
				<pre>
					Test that it should have id greater than 50
					Expect HTTP request
						method: get
						url: https://jsonplaceholder.typicode.com/posts 
					To match JSON rules
				</pre>
				You should see a code lens link at the top of the test that says Generate JSON Rules, click it, if all goes well some JSON-based rules should be added to the test.
              </p>
            </section>
            <!--//section-->          
          </article>
          <!--//docs-article-->

          <article class="docs-article" id="section-4">
            <header class="docs-header">
              <h1 class="docs-heading">Rules</h1>
              <section class="docs-intro">
                <p>
                The test verifies that the response complies with certain rules.
                </p>
              </section>
              <!--//docs-intro-->
            </header>
            <section class="docs-section" id="item-4-1">
              <h2 class="section-heading">4.1 JSON-based rules</h2>
              <div class="markdown-body">
				<p>JSON rules consist of:</p>
				<ul>
				<li>A JSON path and either a literal value or a matcher.</li>
				</ul>
				<p>The possible rules are (<em>x, y, z in the rules refer to parameters</em>):</p>
				<table role="table">
				<thead>
				<tr>
				<th>Matcher</th>
				<th>What it means</th>
				</tr>
				</thead>
				<tbody>
				<tr>
				<td>is a number</td>
				<td>checks if every value that matches the JSON path is a number</td>
				</tr>
				<tr>
				<td>&gt; x</td>
				<td>checks if every value that matches the JSON path is a number greater than x</td>
				</tr>
				<tr>
				<td>&gt;= x</td>
				<td>checks if every value that matches the JSON path is a number greater than or equal to x</td>
				</tr>
				<tr>
				<td>&lt; x</td>
				<td>checks if every value that matches the JSON path is a number less than x</td>
				</tr>
				<tr>
				<td>&lt;= x</td>
				<td>checks if every value that matches the JSON path is a number less than or equal to x</td>
				</tr>
				<tr>
				<td>is text</td>
				<td>checks if every value that matches the JSON path is text of length 1 or longer</td>
				</tr>
				<tr>
				<td>is text containing x</td>
				<td>checks if every value that matches the JSON path is text that contains x</td>
				</tr>
				<tr>
				<td>is text not containing x</td>
				<td>checks if every value that matches the JSON path is text that does not contain x</td>
				</tr>
				<tr>
				<td>is any of x y z</td>
				<td>checks if every value that matches the JSON path is one of the values</td>
				</tr>
				<tr>
				<td>is not x</td>
				<td>checks if every value that matches the JSON path is not x</td>
				</tr>
				<tr>
				<td>matches x</td>
				<td>checks if every value that matches the JSON path matches the regular expression x</td>
				</tr>
				<tr>
				<td>count = x</td>
				<td>checks if the number of values that matches the JSON path is x</td>
				</tr>
				<tr>
				<td>count &gt; x</td>
				<td>checks if the number of values that matches the JSON path is greater than x</td>
				</tr>
				<tr>
				<td>count &gt;= x</td>
				<td>checks if the number of values that matches the JSON path is greater than or equal to x</td>
				</tr>
				<tr>
				<td>count &gt; x</td>
				<td>checks if the number of values that matches the JSON path is greater than x</td>
				</tr>
				<tr>
				<td>count &gt;= x</td>
				<td>checks if the number of values that matches the JSON path is greater than or equal to x</td>
				</tr>
				<tr>
				<td>count &lt; x</td>
				<td>checks if the number of values that matches the JSON path is less than x</td>
				</tr>
				<tr>
				<td>count &lt;= x</td>
				<td>checks if the number of values that matches the JSON path is less than or equal to x</td>
				</tr>
				<tr>
				<td>each has x</td>
				<td>checks if every value that matches the JSON path is an object with a property called x</td>
				</tr>
				<tr>
				<td>properties limited to x y z</td>
				<td>checks if every value that matches the JSON path is an object the properties of which cannot be anything other than x y or z</td>
				</tr>
				<tr>
				<td>is after x</td>
				<td>checks if every value that matches the JSON path is a date after x</td>
				</tr>
				<tr>
				<td>is as early as x</td>
				<td>checks if every value that matches the JSON path is a date as early as x</td>
				</tr>
				<tr>
				<td>is as late as x</td>
				<td>checks if every value that matches the JSON path is a date up to and including x</td>
				</tr>
				<tr>
				<td>is a date</td>
				<td>checks if every value that matches the JSON path is a date</td>
				</tr>
				<tr>
				<td>is earlier than x</td>
				<td>checks if every value that matches the JSON path is a date earlier than x</td>
				</tr>
				<tr>
				<td>is same date as x</td>
				<td>checks if every value that matches the JSON path is a date with the same year day, month, and day as x</td>
				</tr>
				<tr>
				<td>is same date and time as x</td>
				<td>checks if every value that matches the JSON path is a date with the same year day, month, and day and time as x</td>
				</tr>
				<tr>
				<td>is sorted asc/desc</td>
				<td>checks if the values that match the JSON path are stored in either ascending or descending order, one of the following types is automatically inferred: number, date, string</td>
				</tr>
				</tbody>
				</table>  
			  </div>
            </section>
            <!--//section-->

            <section class="docs-section" id="item-4-2">
              <h2 class="section-heading">4.2 Header rules</h2>              
				<p>Header name followed by a colon and the expected value or a rule.
					There is one header rule, it is "must not be present".
					Examples:</p>
					<pre><code>"X-Powered-By":"Express" /* will pass if this header is sent and equals to Express */
"X-Powered-By": must not be present /* will fail if this header is sent */
					</code></pre>              
            </section>
            <!--//section-->

            <section class="docs-section" id="item-4-3">
              <h2 class="section-heading">4.3 Response code rules</h2>
              <p>
				That the expected response code was returned by the server can be checked like so:
				<code>
					To respond with status code 200
				</code>
				This can be useful to prevent <a href="https://support.google.com/webmasters/answer/181708?hl=en">soft 404s</a> and in other situations where returning the correct error code is important.
              </p>
            </section>
            <!--//section-->
          </article>
          <!--//docs-article-->

          <article class="docs-article" id="section-5">
            <header class="docs-header">
              <h1 class="docs-heading">CLI Options</h1>
              <section class="docs-intro">
                <table>
					<thead>
					<tr>
					<th>Option</th>
					<th>What it means</th>
					</tr>
					</thead>
					<tbody>
					<tr>
					<td>--hello</td>
					<td>Print the name of the program before running tests</td>
					</tr>
					<tr>
					<td>--xml</td>
					<td>Output results as JUnit XML</td>
					</tr>
					<tr>
					<td>--novalidation</td>
					<td>Don't validate test file</td>
					</tr>
					<tr>
					<td>--r</td>
					<td>Randomize test order</td>
					</tr>
					<tr>
					<td>-n N</td>
					<td>Rerun the tests a number of times</td>
					</tr>
					<tr>
					<td>-m N</td>
					<td>Maximum concurrent tests. Default: no limit</td>
					</tr>
					<tr>
					<td>--report</td>
					<td>Output an html report with failure rates</td>
					</tr>
					<tr>
					<td>--q</td>
					<td>Don't output real-time test results</td>
					</tr>
					<tr>
					<td>--log</td>
					<td>Output request logs</td>
					</tr>
					<tr>
					<td>--ff</td>
					<td>Exit with error code 1 as as soon as one test fails</td>
					</tr>
					</tbody>
					</table>
              </section>
              <!--//docs-intro-->
            </header>
            <section class="docs-section" id="item-5-1">
              <h2 class="section-heading">5.1 Examples</h2>
              <p>
				<code> aatrl -f example.aartl --report --q -n 100 </code> Means run all the tests in example.aartl 100 times and produce a report, do not output the test results in real times
				<code> aatrl -f example.aartl --ff </code> Means run all the tests in example.aartl once and exit with an error code of 1 as soon as one test fails				
              </p>
            </section>
            <!--//section-->           
          </article>
          <!--//docs-article-->

          <article class="docs-article" id="section-9">
            <header class="docs-header">
              <h1 class="docs-heading">FAQs</h1>
              <section class="docs-intro">
				<p>Questions you might have</p>				
				<h5 class="pt-3"><i class="fas fa-question-circle mr-1"></i>What does the word "agnostic" in AARTL refer to?</h5>
				<p>
				  The fact that it is indifferent to the plaform on which your server is based.
				</p>
              </section>
              <!--//docs-intro-->
            </header>
            <section class="docs-section" id="item-6-1">
				<h2 class="section-heading">6.1 <small>Prerequisites</small></h2>
				<h5 class="pt-3"><i class="fas fa-question-circle mr-1"></i>What operating system can AARTL run on?</h5>
				<p>
				  Current versions of Windows, common Linux distributions, macOS, freeBSD 
				</p>
            </section>
            <!--//section-->

            
          </article>
          <!--//docs-article-->

          <footer class="footer">
            <div class="container text-center py-5">
              <!--/* This template is free as long as you keep the footer attribution link. If you'd like to use the template without the attribution link, you can buy the commercial license via our website: themes.3rdwavemedia.com Thank you for your support. :) */-->
              <small class="copyright">
                This documentation &copy;2020 Ivan Kouznetsov. Made available under the
                <a href="https://www.gnu.org/licenses/fdl-1.3.en.html">GNU Free Documentation License</a>.</small
              ><br />
              <small class="copyright"
                >Designed with <i class="fas fa-heart" style="color: #fb866a;"></i> by
                <a class="theme-link" href="http://themes.3rdwavemedia.com" target="_blank">Xiaoying Riley</a> for
                developers</small
              >
            </div>
          </footer>
        </div>
      </div>
    </div>
    <!--//docs-wrapper-->

    <!-- Javascript -->
    <script src="assets/plugins/jquery-3.4.1.min.js"></script>
    <script src="assets/plugins/popper.min.js"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>

    <!-- Page Specific JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
    <script src="assets/js/highlight-custom.js"></script>
    <script src="assets/plugins/jquery.scrollTo.min.js"></script>
    <script src="assets/plugins/lightbox/dist/ekko-lightbox.min.js"></script>
    <script src="assets/js/docs.js"></script>
  </body>
</html>
